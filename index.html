<!doctype html>
<html lang="de" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ASV S√ºchteln mE1 ¬∑ Live</title>

  <!-- PWA/Meta -->
  <meta name="theme-color" content="#0B1020" />
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/assets/icon-192-maskable.png" />
  <meta name="color-scheme" content="light dark">

  <!-- Performance -->
  <link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="/assets/styles.css" />
  <link rel="stylesheet" href="/assets/styles.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="/assets/styles.css"></noscript>

  <!-- Critical CSS (kleiner Ausschnitt f√ºr Above-the-Fold) -->
  <style>
    :root{
      --asv-blue:#0046AD;--asv-red:#E21B23;--bg:#0B1020;--bg-soft:#12182b;--fg:#E9ECF4;--muted:#9aa4bf;
      --card:#0f1526;--shadow:0 10px 30px rgba(0,0,0,.25);--radius:16px;
    }
    @media (prefers-color-scheme: light){
      html[data-theme="auto"] :root{--bg:#f6f8ff;--bg-soft:#ffffff;--fg:#0b1020;--muted:#5c6680;--card:#ffffff;}
    }
    html[data-theme="light"] :root{--bg:#f6f8ff;--bg-soft:#ffffff;--fg:#0b1020;--muted:#5c6680;--card:#ffffff;}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .wrap{max-width:1100px;margin:auto;padding:16px}
    header.app{display:flex;gap:12px;align-items:center;justify-content:space-between}
    header .brand{display:flex;gap:12px;align-items:center}
    header .brand .logo{width:40px;height:40px;border-radius:12px;background:
      radial-gradient(circle at 30% 30%, #fff3, transparent 40%),
      conic-gradient(var(--asv-blue),var(--asv-red));
      box-shadow: var(--shadow)}
    header .actions{display:flex;gap:8px;align-items:center}
    .btn{border:0;border-radius:999px;padding:10px 14px;cursor:pointer;background:var(--bg-soft);color:var(--fg)}
    .btn.primary{background:linear-gradient(135deg,var(--asv-blue),var(--asv-red));color:#fff}
    main{display:grid;gap:16px;margin-top:12px}
    section.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;overflow:hidden}
    .grid-2{display:grid;grid-template-columns:1fr;gap:16px}
    @media (min-width:900px){.grid-2{grid-template-columns:2fr 1fr}}
    .skeleton{position:relative;overflow:hidden;background:linear-gradient(90deg,#ffffff10,#ffffff05,#ffffff10);border-radius:12px}
    .skeleton::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.15),transparent);transform:translateX(-100%);animation:shimmer 1.2s infinite}
    @keyframes shimmer{to{transform:translateX(100%)}}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:10px;border-bottom:1px solid #ffffff10;text-align:left}
    .badge{display:inline-flex;align-items:center;gap:6px;padding:3px 8px;border-radius:999px;background:#ffffff14}
    .muted{color:var(--muted)}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <a class="sr-only" href="#content">Zum Inhalt springen</a>
  <div class="wrap">
    <header class="app" aria-label="Seitennavigation">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div style="font-weight:800;letter-spacing:.2px">ASV S√ºchteln mE1</div>
          <div class="muted" style="font-size:.9rem">Live Scores ¬∑ Tabelle ¬∑ Spielplan</div>
        </div>
      </div>
      <div class="actions">
        <button id="btn-install" class="btn" hidden>Installieren</button>
        <button id="btn-share" class="btn" aria-label="Seite teilen">Teilen</button>
        <button id="btn-theme" class="btn" aria-pressed="false" aria-label="Theme umschalten">üåó</button>
      </div>
    </header>

    <main id="content" class="grid-2" aria-live="polite">
      <!-- Linke Spalte -->
      <div class="stack" style="display:grid;gap:16px">
        <!-- Next Game + Countdown -->
        <section class="card" id="next-game" aria-labelledby="next-game-h">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
            <h2 id="next-game-h" style="margin:0">N√§chstes Spiel</h2>
            <span id="form-indicator" class="badge">Form: <strong id="form-value" style="font-variant-numeric:tabular-nums">‚Äì</strong></span>
          </div>
          <div id="next-game-body" class="skeleton" style="height:110px;margin-top:12px;border-radius:12px"></div>
        </section>

        <!-- Spielplan -->
        <section class="card" id="schedule" aria-labelledby="schedule-h">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
            <h2 id="schedule-h" style="margin:0">Spielplan & Ergebnisse</h2>
            <div style="display:flex;gap:8px;align-items:center">
              <label class="badge"><input id="flt-only-asv" type="checkbox" checked> nur ASV</label>
              <label class="badge"><input id="flt-upcoming" type="checkbox" checked> nur bevorstehend</label>
            </div>
          </div>
          <div id="schedule-body" style="margin-top:8px">
            <div class="skeleton" style="height:240px"></div>
          </div>
          <details id="iframe-fallback" style="margin-top:10px" hidden>
            <summary>Fallback: Original-Ansicht laden (iFrame)</summary>
            <iframe id="iframe-el" title="nuLiga Fallback" loading="lazy" style="width:100%;height:520px;border:0;border-radius:12px;margin-top:10px"></iframe>
          </details>
        </section>
      </div>

      <!-- Rechte Spalte -->
      <aside class="stack" style="display:grid;gap:16px">
        <!-- Tabelle -->
        <section class="card" id="table" aria-labelledby="table-h">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
            <h2 id="table-h" style="margin:0">Tabelle</h2>
            <div style="display:flex;gap:8px;align-items:center">
              <label class="badge"><input id="flt-top" type="checkbox" checked> Top-3</label>
              <span class="badge" title="Letztes Update"><span class="muted">‚è±</span><time id="tbl-updated">‚Äì</time></span>
            </div>
          </div>
          <div id="table-body" style="margin-top:8px">
            <div class="skeleton" style="height:240px"></div>
          </div>
        </section>

        <!-- Mini-Tabelle (sticky) -->
        <section class="card" id="mini" aria-labelledby="mini-h">
          <h3 id="mini-h" style="margin:0 0 8px 0">Mini-Tabelle</h3>
          <div id="mini-body"><div class="skeleton" style="height:120px"></div></div>
        </section>
      </aside>
    </main>

    <footer class="muted" style="margin:18px 0;text-align:center">
      <small>¬© <span id="year"></span> ASV S√ºchteln ¬∑ PWA-Modus aktiv ¬∑ <a href="#" class="muted" id="link-offline">Offline testen</a></small>
    </footer>
  </div>

  <script type="module" src="/scripts/app.js" defer></script>
</body>
</html>
